webpackJsonp([2,0],[function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var s=o(2),a=n(s),r=o(17),i=n(r),d=o(46),u=n(d),l=o(64),c=n(l),f=o(44),m=n(f),p=o(5),g=n(p),v=o(4),_=n(v);a.default.use(c.default,u.default),g.default.beforeEach(function(t,e,o){if(m.default.state.msg=!1,t.matched.some(function(t){return t.meta.requiresAuth})&&""===m.default.state.token){if(!_.default.loggedIn())return void o({path:"/login"});m.default.state.token=_.default.getToken(),m.default.state.user=_.default.getUser()}o()}),g.default.afterEach(function(t){document.title=t.meta.title}),new a.default({store:m.default,el:"#app",template:"<App/>",components:{App:i.default},router:g.default})},,,,function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(45),a=n(s);e.default={setToken:function(t){localStorage.setItem("token",t)},getToken:function(){return localStorage.getItem("token")},setUser:function(t){localStorage.setItem("user",(0,a.default)(t))},getUser:function(){return localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null},loggedIn:function(){return!!localStorage.getItem("token")},logout:function(){localStorage.removeItem("user"),localStorage.removeItem("token")}}},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(43),a=n(s),r=o(2),i=n(r),d=o(65),u=n(d);i.default.use(u.default),e.default=new u.default({routes:a.default})},,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,o){var n,s;n=o(35);var a=o(32);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),"undefined"==typeof s.name&&(s.name="App"),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=n},function(t,e,o){var n,s;o(16),n=o(36);var a=o(31);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),"undefined"==typeof s.name&&(s.name="Loader"),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=n},function(t,e,o){var n,s;o(12),n=o(37);var a=o(26);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),"undefined"==typeof s.name&&(s.name="Login"),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=n},function(t,e,o){var n,s;n=o(38);var a=o(28);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),"undefined"==typeof s.name&&(s.name="Msg"),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=n},function(t,e,o){var n,s;o(15),n=o(39);var a=o(30);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),"undefined"==typeof s.name&&(s.name="Register"),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=n},function(t,e,o){var n,s;o(14),n=o(40);var a=o(29);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),"undefined"==typeof s.name&&(s.name="Todo"),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=n},function(t,e,o){var n,s;n=o(41);var a=o(25);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),"undefined"==typeof s.name&&(s.name="TodoForm"),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=n},function(t,e,o){var n,s;o(13),n=o(42);var a=o(27);s=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(s=n=n.default),"function"==typeof s&&(s=s.options),"undefined"==typeof s.name&&(s.name="Todos"),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=n},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("form",{on:{submit:function(e){e.preventDefault(),t.addTodo(t.newTodo)}}},[o("div",{staticClass:"form-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.newTodo.title,expression:"newTodo.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"添加一条新的记录"},domProps:{value:t._s(t.newTodo.title)},on:{input:function(e){e.target.composing||(t.newTodo.title=e.target.value)}}})]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"from-group"},[o("button",{staticClass:"btn btn-success",attrs:{type:"submit"}},[t._v("添加记录")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("form",{on:{submit:function(e){e.preventDefault(),t.login(t.loginForm)}}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"email"}},[t._v("邮箱：")]),t._v(" "),o("div",{staticClass:"input-group"},[o("span",{staticClass:"input-group-addon"},[t._v("E")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.email,expression:"loginForm.email"}],staticClass:"form-control",attrs:{type:"email",id:"email",name:"email",placeholder:"请输入邮箱"},domProps:{value:t._s(t.loginForm.email)},on:{input:function(e){e.target.composing||(t.loginForm.email=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"password"}},[t._v("密码：")]),t._v(" "),o("div",{staticClass:"input-group"},[o("span",{staticClass:"input-group-addon"},[t._v("P")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.password,expression:"loginForm.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",name:"password",placeholder:"请输入密码"},domProps:{value:t._s(t.loginForm.password)},on:{input:function(e){e.target.composing||(t.loginForm.password=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-default btn-primary",attrs:{type:"submit"}},[t._v("登录")]),t._v(" "),o("router-link",{staticClass:"btn btn-default",attrs:{to:"register"}},[t._v("注册")])],1)])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"todos"}},[o("h1",[t._v("备忘录数量（"+t._s(t.todoCount)+"）")]),t._v(" "),o("ul",{staticClass:"list-group"},t._l(t.todos,function(e,n){return o("li",{staticClass:"list-group-item",class:{completed:e.completed}},[o("router-link",{attrs:{to:{name:"todo",params:{id:e.id}}}},[t._v(t._s(e.title))]),t._v(" "),o("button",{staticClass:"btn btn-xs pull-right btn-warning",staticStyle:{"margin-left":"5px"},on:{click:function(o){t.deleteTodo(n,e)}}},[t._v("删除")]),t._v(" "),o("button",{staticClass:"btn btn-xs pull-right",class:[e.completed?"btn-danger":"btn-success"],on:{click:function(o){t.toggleCompletion(e)}}},[t._v(t._s(e.completed?"取消":"标记"))])],1)})),t._v(" "),o("todo-form")],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"alert",class:t.msgType},[o("strong",[t._v(t._s(t.msgText))])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo"},[o("router-link",{staticClass:"btn btn-default",attrs:{to:"/"}},[t._v("返回")]),t._v(" "),t.error?o("div",{staticClass:"error"},[t._v("\n        "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),t.todo?o("div",{staticClass:"content"},[o("h2",[t._v(t._s(t.todo.title))])]):t._e()],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"register"},[o("form",{on:{submit:function(e){e.preventDefault(),t.register(t.registerForm)}}},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"name"}},[t._v("昵称：")]),t._v(" "),o("div",{staticClass:"input-group"},[o("span",{staticClass:"input-group-addon"},[t._v("N")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.name,expression:"registerForm.name"}],staticClass:"form-control",attrs:{type:"text",id:"name",name:"name",placeholder:"请输入昵称"},domProps:{value:t._s(t.registerForm.name)},on:{input:function(e){e.target.composing||(t.registerForm.name=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"email"}},[t._v("邮箱：")]),t._v(" "),o("div",{staticClass:"input-group"},[o("span",{staticClass:"input-group-addon"},[t._v("E")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.email,expression:"registerForm.email"}],staticClass:"form-control",attrs:{type:"email",id:"email",name:"email",placeholder:"请输入邮箱"},domProps:{value:t._s(t.registerForm.email)},on:{input:function(e){e.target.composing||(t.registerForm.email=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-group"},[o("label",{attrs:{for:"password"}},[t._v("密码：")]),t._v(" "),o("div",{staticClass:"input-group"},[o("span",{staticClass:"input-group-addon"},[t._v("P")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.registerForm.password,expression:"registerForm.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",name:"password",placeholder:"请输入密码"},domProps:{value:t._s(t.registerForm.password)},on:{input:function(e){e.target.composing||(t.registerForm.password=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-default btn-primary",attrs:{type:"submit"}},[t._v("注册")]),t._v(" "),o("router-link",{staticClass:"btn btn-default",attrs:{to:"login"}},[t._v("登录")])],1)])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("loader"),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-8 col-md-offset-2"},[o("div",{staticClass:"panel panel-default"},[o("div",{staticClass:"panel-heading clearfix"},[o("div",{staticClass:"pull-left",staticStyle:{padding:"6px 12px"}},[t._v("我的备忘录")]),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.token,expression:"token"}],staticClass:"dropdown pull-right"},[o("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button",id:"dropdownMenu1","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"}},[t._v("\n              "+t._s(t.user.name)+"\n              "),o("span",{staticClass:"caret"})]),t._v(" "),o("ul",{staticClass:"dropdown-menu"},[o("li",[o("a",{on:{click:function(e){t.logout()}}},[t._v("退出")])])])])]),t._v(" "),o("div",{staticClass:"panel-body"},[o("msg",{directives:[{name:"show",rawName:"v-show",value:t.msg,expression:"msg"}]}),t._v(" "),o("router-view")],1)])])])],1)},staticRenderFns:[]}},,,function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(18),a=n(s),r=o(20),i=n(r);e.default={name:"app",computed:{token:function(){return this.$store.state.token},user:function(){return this.$store.state.user},msg:function(){return this.$store.state.msg}},methods:{logout:function(){this.$store.dispatch("logout")}},components:{Loader:a.default,Msg:i.default}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={computed:{loading:function(){return this.$store.state.loading}},methods:{toggleLoading:function(t){this.$store.state.loading=t}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"login",data:function(){return{loginForm:{email:"",password:""}}},methods:{login:function(t){this.$store.dispatch("login",t)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={computed:{msgType:function(){return this.$store.state.msgType},msgText:function(){return this.$store.state.msgText}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"register",data:function(){return{registerForm:{name:"",email:"",password:""}}},methods:{register:function(t){this.$store.dispatch("register",t)}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){this.$store.dispatch("getTodo",this.$route.params.id)}},computed:{todo:function(){return this.$store.state.todo},error:function(){return this.$store.state.error}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={computed:{newTodo:function(){return this.$store.state.newTodo}},methods:{addTodo:function(t){this.$store.dispatch("saveTodo",t)}}}},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(23),a=n(s);e.default={name:"todos",mounted:function(){this.$store.dispatch("getTodos")},methods:{deleteTodo:function(t,e){this.$store.dispatch("removeTodo",{todo:e,index:t})},toggleCompletion:function(t){this.$store.dispatch("completeTodo",t)}},computed:{todos:function(){return this.$store.state.todos},todoCount:function(){return this.$store.state.todos.length}},components:{TodoForm:a.default}}},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(24),a=n(s),r=o(22),i=n(r),d=o(19),u=n(d),l=o(21),c=n(l);e.default=[{path:"/register",name:"register",component:c.default,meta:{title:"注册"}},{path:"/login",name:"login",component:u.default,meta:{title:"登录"}},{path:"/",name:"index",component:a.default,meta:{title:"我的备忘录",requiresAuth:!0}},{path:"/todo/:id",name:"todo",component:i.default,meta:{title:"备忘录",requiresAuth:!0}},{path:"*",redirect:"/"}]},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(2),a=n(s),r=o(66),i=n(r),d=o(5),u=n(d),l=o(4),c=n(l);a.default.use(i.default);var f="http://vuejs.app/api";e.default=new i.default.Store({state:{loading:!1,error:!1,msg:!1,msgType:"alert-warning",msgText:"我的备忘录....",token:"",user:{id:null,name:"",email:""},todos:[],todo:!1,newTodo:{id:null,title:"",completed:!1}},mutations:{set_token:function(t,e){t.token=e},set_user:function(t,e){t.user=e},get_todos_list:function(t,e){t.todos=e},get_todo:function(t,e){t.todo=e},complete_todo:function(t,e){e.completed=!e.completed},delete_todo:function(t,e){t.todos.splice(e,1)},add_todo:function(t,e){t.todos.push(e)},show_msg:function(t,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"alert-warning";t.msgText=e,t.msgType=o,t.msg=!0}},actions:{register:function(t,e){t.state.loading=!0,a.default.axios.post(f+"/user/register",e).then(function(e){return t.state.loading=!1,"failed"==e.data.status?void t.commit("show_msg",e.data.errors.message):void u.default.push("/login")})},login:function(t,e){t.state.loading=!0,a.default.axios.post(f+"/user/login",e).then(function(e){return t.state.loading=!1,"failed"==e.data.status?void t.commit("show_msg",e.data.errors.message):(c.default.setToken(e.data.correct.data.token),c.default.setUser(e.data.correct.data.user),t.commit("set_user",e.data.correct.data.user),t.commit("set_token",e.data.correct.data.token),void u.default.push("/"))})},logout:function(t){t.state.todos=[],t.state.newTodo={id:null,title:"",completed:!1},t.commit("set_user",{id:null,name:"",email:""}),t.commit("set_token",""),c.default.logout(),u.default.push("/login")},getTodos:function(t){t.state.token&&(t.state.loading=!0,a.default.axios.post(f+"/todo",{token:t.state.token}).then(function(e){return t.state.loading=!1,"failed"==e.data.status?void t.commit("show_msg",e.data.errors.message):void t.commit("get_todos_list",e.data.correct.data.todos)}))},getTodo:function(t,e){t.state.token&&(t.state.todo=!1,t.state.loading=!0,a.default.axios.post(f+"/todo/"+e,{token:t.state.token}).then(function(e){return t.state.loading=!1,"failed"==e.data.status?void t.commit("show_msg",e.data.errors.message):void t.commit("get_todo",e.data.correct.data.todo)}))},completeTodo:function(t,e){t.state.token&&(t.state.loading=!0,a.default.axios.patch(f+"/todo/"+e.id+"/completed",{token:t.state.token}).then(function(o){return t.state.loading=!1,"failed"==o.data.status?void t.commit("show_msg",o.data.errors.message):void t.commit("complete_todo",e)}))},removeTodo:function(t,e){t.state.token&&(t.state.loading=!0,a.default.axios.post(f+"/todo/"+e.todo.id+"/delete",{token:t.state.token}).then(function(o){return t.state.loading=!1,"failed"==o.data.status?void t.commit("show_msg",o.data.errors.message):void t.commit("delete_todo",e.index)}))},saveTodo:function(t,e){t.state.token&&(t.state.loading=!0,e.token=t.state.token,a.default.axios.post(f+"/todo/create",e).then(function(e){t.state.loading=!1,t.commit("add_todo",e.data.correct.data.todo)}),t.state.newTodo={id:null,title:"",completed:!1})}}})}]);
//# sourceMappingURL=app.b6aad41602a935c84e30.js.map